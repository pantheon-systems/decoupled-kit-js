{"version":3,"sources":["../../src/services/listen-for-mutations.ts"],"names":["listenForMutations","callback","emitMutation","event","type","payload","emitSourceChange","emitWebhook","emitQueryRunRequest","emitter","on","unsubscribeFromMutationListening","off"],"mappings":";;;;;AAAA;;AAGO,MAAMA,kBAAkC,GAAIC,QAAD,IAA2B;AAC3E,QAAMC,YAAY,GAAIC,KAAD,IAA0B;AAC7CF,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAG,mBAAT;AAA6BC,MAAAA,OAAO,EAAEF;AAAtC,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMG,gBAAgB,GAAIH,KAAD,IAA0B;AACjDF,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAG,qBAAT;AAA+BC,MAAAA,OAAO,EAAEF;AAAxC,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMI,WAAW,GAAIJ,KAAD,IAA0B;AAC5CF,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAG,kBAAT;AAA4BC,MAAAA,OAAO,EAAEF;AAArC,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMK,mBAAmB,GAAIL,KAAD,IAA0B;AACpDF,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAG,qBAAT;AAA+BC,MAAAA,OAAO,EAAEF;AAAxC,KAAD,CAAR;AACD,GAFD;;AAIAM,iBAAQC,EAAR,CAAY,uBAAZ,EAAoCR,YAApC;;AACAO,iBAAQC,EAAR,CAAY,kBAAZ,EAA+BH,WAA/B;;AACAE,iBAAQC,EAAR,CAAY,qBAAZ,EAAkCJ,gBAAlC;;AACAG,iBAAQC,EAAR,CAAY,qBAAZ,EAAkCF,mBAAlC;;AAEA,SAAO,SAASG,gCAAT,GAAkD;AACvDF,mBAAQG,GAAR,CAAa,uBAAb,EAAqCV,YAArC;;AACAO,mBAAQG,GAAR,CAAa,kBAAb,EAAgCL,WAAhC;;AACAE,mBAAQG,GAAR,CAAa,qBAAb,EAAmCN,gBAAnC;;AACAG,mBAAQG,GAAR,CAAa,qBAAb,EAAmCJ,mBAAnC;AACD,GALD;AAMD,CA5BM","sourcesContent":["import { emitter } from \"../redux\"\nimport { InvokeCallback, Sender } from \"xstate\"\n\nexport const listenForMutations: InvokeCallback = (callback: Sender<any>) => {\n  const emitMutation = (event: unknown): void => {\n    callback({ type: `ADD_NODE_MUTATION`, payload: event })\n  }\n\n  const emitSourceChange = (event: unknown): void => {\n    callback({ type: `SOURCE_FILE_CHANGED`, payload: event })\n  }\n\n  const emitWebhook = (event: unknown): void => {\n    callback({ type: `WEBHOOK_RECEIVED`, payload: event })\n  }\n\n  const emitQueryRunRequest = (event: unknown): void => {\n    callback({ type: `QUERY_RUN_REQUESTED`, payload: event })\n  }\n\n  emitter.on(`ENQUEUE_NODE_MUTATION`, emitMutation)\n  emitter.on(`WEBHOOK_RECEIVED`, emitWebhook)\n  emitter.on(`SOURCE_FILE_CHANGED`, emitSourceChange)\n  emitter.on(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n\n  return function unsubscribeFromMutationListening(): void {\n    emitter.off(`ENQUEUE_NODE_MUTATION`, emitMutation)\n    emitter.off(`WEBHOOK_RECEIVED`, emitWebhook)\n    emitter.off(`SOURCE_FILE_CHANGED`, emitSourceChange)\n    emitter.off(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n  }\n}\n"],"file":"listen-for-mutations.js"}