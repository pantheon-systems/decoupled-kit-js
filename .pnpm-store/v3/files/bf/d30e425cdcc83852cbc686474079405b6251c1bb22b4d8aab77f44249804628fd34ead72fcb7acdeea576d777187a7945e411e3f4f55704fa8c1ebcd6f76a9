{"version":3,"sources":["../../../src/internal-plugins/bundle-optimisations/gatsby-node.js"],"names":["path","require","exports","onCreateBabelConfig","actions","setBabelPlugin","name","onCreateWebpackConfig","stage","objectAssignStub","join","__dirname","noOp","fetchStub","whatwgFetchStub","alias","unfetch$","setWebpackConfig","resolve"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAE,MAAF,CAApB;;AAEAC,OAAO,CAACC,mBAAR,GAA8B,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC7C;AACAA,EAAAA,OAAO,CAACC,cAAR,CAAuB;AACrBC,IAAAA,IAAI,EAAG;AADc,GAAvB;AAGD,CALD;;AAOAJ,OAAO,CAACK,qBAAR,GAAgC,SAASA,qBAAT,CAA+B;AAC7DC,EAAAA,KAD6D;AAE7DJ,EAAAA;AAF6D,CAA/B,EAG7B;AACD,QAAMK,gBAAgB,GAAGT,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,4BAAtB,CAAzB;AACA,QAAMC,IAAI,GAAGZ,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAb;AACA,QAAME,SAAS,GAAGb,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAlB;AACA,QAAMG,eAAe,GAAGd,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,2BAAtB,CAAxB;AAEA,QAAMI,KAAK,GAAG;AACZ;AACA;AACA,qBAAiBN,gBAHL;AAIZ,sBAAkBA,gBAJN;AAKZ,0CAAsCA,gBAL1B;AAMZ;AACAO,IAAAA,QAAQ,EAAEH,SAPE;AAQZ,yBAAqBD,IART;AASZ,2BAAuBC,SATX;AAUZ,yBAAqBA,SAVT;AAWZ,qBAAiBC;AAXL,GAAd;;AAcA,MAAIN,KAAK,KAAM,kBAAX,IAAgCA,KAAK,KAAM,SAA/C,EAAyD;AACvDO,IAAAA,KAAK,CAAE,eAAF,CAAL,GAAyBH,IAAzB;AACD;;AAEDR,EAAAA,OAAO,CAACa,gBAAR,CAAyB;AACvBC,IAAAA,OAAO,EAAE;AACPH,MAAAA;AADO;AADc,GAAzB;AAKD,CAhCD","sourcesContent":["const path = require(`path`)\n\nexports.onCreateBabelConfig = ({ actions }) => {\n  // rewrites import { get }from 'lodash' into import get from 'lodash/get';\n  actions.setBabelPlugin({\n    name: `babel-plugin-lodash`,\n  })\n}\n\nexports.onCreateWebpackConfig = function onCreateWebpackConfig({\n  stage,\n  actions,\n}) {\n  const objectAssignStub = path.join(__dirname, `polyfills/object-assign.js`)\n  const noOp = path.join(__dirname, `polyfills/no-op.js`)\n  const fetchStub = path.join(__dirname, `polyfills/fetch.js`)\n  const whatwgFetchStub = path.join(__dirname, `polyfills/whatwg-fetch.js`)\n\n  const alias = {\n    // These files are already polyfilled so these should return in a no-op\n    // Stub Package: object.assign & object-assign\n    \"object.assign\": objectAssignStub,\n    \"object-assign$\": objectAssignStub,\n    \"@babel/runtime/helpers/extends.js$\": objectAssignStub,\n    // Stub package: fetch\n    unfetch$: fetchStub,\n    \"unfetch/polyfill$\": noOp,\n    \"isomorphic-unfetch$\": fetchStub,\n    \"isomorphic-fetch$\": fetchStub,\n    \"whatwg-fetch$\": whatwgFetchStub,\n  }\n\n  if (stage === `build-javascript` || stage === `develop`) {\n    alias[`url-polyfill$`] = noOp\n  }\n\n  actions.setWebpackConfig({\n    resolve: {\n      alias,\n    },\n  })\n}\n"],"file":"gatsby-node.js"}