{"version":3,"sources":["../../../../src/utils/worker/child/load-config-and-plugins.ts"],"names":["loadConfigAndPlugins","args","siteDirectory","program","store","dispatch","type","payload","directory","config"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,eAAeA,oBAAf,CACL,GAAGC,IADE,EAEU;AACf,QAAM,CAAC;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,GAAD,IAA+BF,IAArC;;AAEAG,eAAMC,QAAN,CAAe;AACbC,IAAAA,IAAI,EAAG,aADM;AAEbC,IAAAA,OAAO,EAAE,EACP,GAAGJ,OADI;AAEPK,MAAAA,SAAS,EAAEN;AAFJ;AAFI,GAAf;;AAOA,QAAMO,MAAM,GAAG,MAAM,4BAAW,GAAGR,IAAd,CAArB;AACA,QAAM,8BAAYQ,MAAZ,EAAoBP,aAApB,CAAN,CAXe,CAaf;;AACA,MAAI,QAA2B,GAA/B,EAAmC;AACjC,UAAM,4BAAe,cAAf,CAAN;AACD,GAFD,MAEO;AACL,UAAM,4BAAe,uBAAf,CAAN;AACD;AACF","sourcesContent":["import { loadConfig } from \"../../../bootstrap/load-config\"\nimport { loadPlugins } from \"../../../bootstrap/load-plugins\"\nimport { store } from \"../../../redux\"\nimport apiRunnerNode from \"../../api-runner-node\"\n\nexport async function loadConfigAndPlugins(\n  ...args: Parameters<typeof loadConfig>\n): Promise<void> {\n  const [{ siteDirectory, program }] = args\n\n  store.dispatch({\n    type: `SET_PROGRAM`,\n    payload: {\n      ...program,\n      directory: siteDirectory,\n    },\n  })\n  const config = await loadConfig(...args)\n  await loadPlugins(config, siteDirectory)\n\n  // Cache is already initialized\n  if (_CFLAGS_.GATSBY_MAJOR === `4`) {\n    await apiRunnerNode(`onPluginInit`)\n  } else {\n    await apiRunnerNode(`unstable_onPluginInit`)\n  }\n}\n"],"file":"load-config-and-plugins.js"}