{"version":3,"sources":["../../src/services/post-bootstrap.ts"],"names":["postBootstrap","parentSpan","deferNodeMutation","activity","reporter","activityTimer","start","span","end","info","stripIndent","process","uptime","toFixed","emitter","emit","store","dispatch","actions","setProgramStatus"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEO,eAAeA,aAAf,CAA6B;AAClCC,EAAAA,UADkC;AAElCC,EAAAA;AAFkC,CAA7B,EAGuC;AAC5C,QAAMC,QAAQ,GAAGC,kBAASC,aAAT,CAAwB,iBAAxB,EAA0C;AACzDJ,IAAAA;AADyD,GAA1C,CAAjB;;AAGAE,EAAAA,QAAQ,CAACG,KAAT;AACA,QAAM,4BAAe,iBAAf,EAAiC;AACrCL,IAAAA,UAAU,EAAEE,QAAQ,CAACI,IADgB;AAErCL,IAAAA;AAFqC,GAAjC,CAAN;AAIAC,EAAAA,QAAQ,CAACK,GAAT;;AAEAJ,oBAASK,IAAT,CAAcL,kBAASM,WAAY;AACrC,2BAA2BC,OAAO,CAACC,MAAR,GAAiBC,OAAjB,CAAyB,CAAzB,CAA4B;AACvD,GAFE;;AAGAC,iBAAQC,IAAR,CAAc,oBAAd,EAAmC,EAAnC;;AACAC,eAAMC,QAAN,CAAeC,iBAAQC,gBAAR,CAA0B,oBAA1B,CAAf;AACD","sourcesContent":["import reporter from \"gatsby-cli/lib/reporter\"\nimport { emitter, store } from \"../redux\"\nimport apiRunnerNode from \"../utils/api-runner-node\"\nimport { IDataLayerContext } from \"../state-machines/data-layer/types\"\nimport { actions } from \"../redux/actions\"\n\nexport async function postBootstrap({\n  parentSpan,\n  deferNodeMutation,\n}: Partial<IDataLayerContext>): Promise<void> {\n  const activity = reporter.activityTimer(`onPostBootstrap`, {\n    parentSpan,\n  })\n  activity.start()\n  await apiRunnerNode(`onPostBootstrap`, {\n    parentSpan: activity.span,\n    deferNodeMutation,\n  })\n  activity.end()\n\n  reporter.info(reporter.stripIndent`\n    bootstrap finished - ${process.uptime().toFixed(3)}s\n  `)\n  emitter.emit(`BOOTSTRAP_FINISHED`, {})\n  store.dispatch(actions.setProgramStatus(`BOOTSTRAP_FINISHED`))\n}\n"],"file":"post-bootstrap.js"}