{"version":3,"sources":["../../../../src/bootstrap/load-plugins/utils/normalize.ts"],"names":["normalizePlugin","plugin","resolve","options","plugins","normalizePlugins","map","normalizeConfig","config"],"mappings":";;;;;;;AAGO,SAASA,eAAT,CACLC,MADK,EAEa;AAAA;;AAClB,MAAI,OAAOA,MAAP,KAAmB,QAAvB,EAAgC;AAC9B,WAAO;AACLC,MAAAA,OAAO,EAAED,MADJ;AAELE,MAAAA,OAAO,EAAE;AAFJ,KAAP;AAID;;AAED,yBAAIF,MAAM,CAACE,OAAX,4CAAI,gBAAgBC,OAApB,EAA6B;AAC3BH,IAAAA,MAAM,CAACE,OAAP,GAAiB,EACf,GAAGF,MAAM,CAACE,OADK;AAEfC,MAAAA,OAAO,EAAEC,gBAAgB,CAACJ,MAAM,CAACE,OAAP,CAAeC,OAAhB;AAFV,KAAjB;AAID;;AAED,SAAOH,MAAP;AACD;;AAEM,SAASI,gBAAT,CACLD,OADK,EAEoB;AACzB,SAAO,CAACA,OAAO,IAAI,EAAZ,EAAgBE,GAAhB,CAAoBN,eAApB,CAAP;AACD;;AAEM,MAAMO,eAAe,GAAG,CAACC,MAAsB,GAAG,EAA1B,KAA8C;AAC3E,SAAO,EACL,GAAGA,MADE;AAELJ,IAAAA,OAAO,EAAE,CAACI,MAAM,CAACJ,OAAP,IAAkB,EAAnB,EAAuBE,GAAvB,CAA2BN,eAA3B;AAFJ,GAAP;AAID,CALM","sourcesContent":["import { ISiteConfig, IRawSiteConfig } from \"../types\"\nimport { IPluginRefObject, PluginRef } from \"gatsby-plugin-utils/dist/types\"\n\nexport function normalizePlugin(\n  plugin: IPluginRefObject | string\n): IPluginRefObject {\n  if (typeof plugin === `string`) {\n    return {\n      resolve: plugin,\n      options: {},\n    }\n  }\n\n  if (plugin.options?.plugins) {\n    plugin.options = {\n      ...plugin.options,\n      plugins: normalizePlugins(plugin.options.plugins),\n    }\n  }\n\n  return plugin\n}\n\nexport function normalizePlugins(\n  plugins?: Array<PluginRef>\n): Array<IPluginRefObject> {\n  return (plugins || []).map(normalizePlugin)\n}\n\nexport const normalizeConfig = (config: IRawSiteConfig = {}): ISiteConfig => {\n  return {\n    ...config,\n    plugins: (config.plugins || []).map(normalizePlugin),\n  }\n}\n"],"file":"normalize.js"}