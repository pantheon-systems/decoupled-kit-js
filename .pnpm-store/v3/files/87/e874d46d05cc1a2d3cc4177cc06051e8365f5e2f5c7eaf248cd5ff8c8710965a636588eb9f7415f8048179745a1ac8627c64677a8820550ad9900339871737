{"version":3,"sources":["../../../src/schema/graphql-engine/webpack-remove-apis-loader.ts"],"names":["apisToKeep","Set","schemaCustomizationAPIs","add","module","exports","loader","source","result","babelrc","configFile","plugins","require","resolve","apis","Object","keys","nodeApis","filter","api","has","code"],"mappings":";;AAAA;;AAEA;;AACA;;;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,GAAJ,CAAQC,qCAAR,CAAnB;AACAF,UAAU,CAACG,GAAX,CAAgB,cAAhB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,MAAT,CAAgBC,MAAhB,EAA2D;AAC1E,QAAMC,MAAM,GAAG,yBAAcD,MAAd,EAAsB;AACnCE,IAAAA,OAAO,EAAE,KAD0B;AAEnCC,IAAAA,UAAU,EAAE,KAFuB;AAGnCC,IAAAA,OAAO,EAAE,CACP,CACEC,OAAO,CAACC,OAAR,CAAiB,2CAAjB,CADF,EAEE;AACEC,MAAAA,IAAI,EAAGC,MAAM,CAACC,IAAP,CAAYC,QAAZ,CAAD,CAAgDC,MAAhD,CACJC,GAAG,IAAI,CAACnB,UAAU,CAACoB,GAAX,CAAeD,GAAf,CADJ;AADR,KAFF,CADO;AAH0B,GAAtB,CAAf;AAeA,SAAOX,MAAP,aAAOA,MAAP,uBAAOA,MAAM,CAAEa,IAAf;AACD,CAjBD","sourcesContent":["import { transformSync } from \"@babel/core\"\nimport { GatsbyNodeAPI } from \"../../redux/types\"\nimport * as nodeApis from \"../../utils/api-node-docs\"\nimport { schemaCustomizationAPIs } from \"./print-plugins\"\n\nconst apisToKeep = new Set(schemaCustomizationAPIs)\napisToKeep.add(`onPluginInit`)\n\nmodule.exports = function loader(source: string): string | null | undefined {\n  const result = transformSync(source, {\n    babelrc: false,\n    configFile: false,\n    plugins: [\n      [\n        require.resolve(`../../utils/babel/babel-plugin-remove-api`),\n        {\n          apis: (Object.keys(nodeApis) as Array<GatsbyNodeAPI>).filter(\n            api => !apisToKeep.has(api)\n          ),\n        },\n      ],\n    ],\n  })\n\n  return result?.code\n}\n"],"file":"webpack-remove-apis-loader.js"}