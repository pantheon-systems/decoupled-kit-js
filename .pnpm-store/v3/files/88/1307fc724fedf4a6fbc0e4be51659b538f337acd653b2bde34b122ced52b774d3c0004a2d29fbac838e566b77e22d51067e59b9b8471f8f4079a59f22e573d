{"version":3,"sources":["../../../src/redux/reducers/status.ts"],"names":["defaultState","PLUGINS_HASH","LAST_NODE_COUNTER","plugins","statusReducer","state","action","type","payload","plugin","name","Error","_","isObject","JSON","stringify","merge","internal","counter"],"mappings":";;;;;;;AAAA;;AAGA,MAAMA,YAAoC,GAAG;AAC3CC,EAAAA,YAAY,EAAG,EAD4B;AAE3CC,EAAAA,iBAAiB,EAAE,CAFwB;AAG3CC,EAAAA,OAAO,EAAE;AAHkC,CAA7C;;AAMO,MAAMC,aAAa,GAAG,CAC3BC,KAA6B,GAAGL,YADL,EAE3BM,MAF2B,KAGA;AAAA;;AAC3B,UAAQA,MAAM,CAACC,IAAf;AACE,SAAM,cAAN;AACE,aAAOP,YAAP;;AACF,SAAM,qBAAN;AACE,aAAO,EACL,GAAGK,KADE;AAELJ,QAAAA,YAAY,EAAEK,MAAM,CAACE;AAFhB,OAAP;;AAIF,SAAM,mBAAN;AACE,UAAI,CAACF,MAAM,CAACG,MAAR,IAAkB,oBAACH,MAAM,CAACG,MAAR,2CAAC,eAAeC,IAAhB,CAAtB,EAA4C;AAC1C,cAAM,IAAIC,KAAJ,CAAW,8CAAX,CAAN;AACD;;AACD,UAAI,CAACC,gBAAEC,QAAF,CAAWP,MAAM,CAACE,OAAlB,CAAL,EAAiC;AAC/B,cAAM,IAAIG,KAAJ,CACH,wEAAuEG,IAAI,CAACC,SAAL,CACtET,MAAM,CAACE,OAD+D,EAEtE,IAFsE,EAGtE,CAHsE,CAItE,EALE,CAAN;AAOD;;AACD,aAAO,EACL,GAAGH,KADE;AAELF,QAAAA,OAAO,EAAE,EACP,GAAGE,KAAK,CAACF,OADF;AAEP,WAACG,MAAM,CAACG,MAAP,CAAcC,IAAf,GAAsBE,gBAAEI,KAAF,CACpB,EADoB,EAEpBX,KAAK,CAACF,OAAN,CAAcG,MAAM,CAACG,MAAP,CAAcC,IAA5B,CAFoB,EAGpBJ,MAAM,CAACE,OAHa;AAFf;AAFJ,OAAP;;AAWF,SAAM,aAAN;AACEH,MAAAA,KAAK,CAACH,iBAAN,GAA0BI,MAAM,CAACE,OAAP,CAAeS,QAAf,CAAwBC,OAAlD;AACA,aAAOb,KAAP;;AACF;AACE,aAAOA,KAAP;AApCJ;AAsCD,CA1CM","sourcesContent":["import _ from \"lodash\"\nimport { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst defaultState: IGatsbyState[\"status\"] = {\n  PLUGINS_HASH: ``,\n  LAST_NODE_COUNTER: 0,\n  plugins: {},\n}\n\nexport const statusReducer = (\n  state: IGatsbyState[\"status\"] = defaultState,\n  action: ActionsUnion\n): IGatsbyState[\"status\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return defaultState\n    case `UPDATE_PLUGINS_HASH`:\n      return {\n        ...state,\n        PLUGINS_HASH: action.payload,\n      }\n    case `SET_PLUGIN_STATUS`:\n      if (!action.plugin || !action.plugin?.name) {\n        throw new Error(`You can't set plugin status without a plugin`)\n      }\n      if (!_.isObject(action.payload)) {\n        throw new Error(\n          `You must pass an object into setPluginStatus. What was passed in was ${JSON.stringify(\n            action.payload,\n            null,\n            4\n          )}`\n        )\n      }\n      return {\n        ...state,\n        plugins: {\n          ...state.plugins,\n          [action.plugin.name]: _.merge(\n            {},\n            state.plugins[action.plugin.name],\n            action.payload\n          ),\n        },\n      }\n    case `CREATE_NODE`:\n      state.LAST_NODE_COUNTER = action.payload.internal.counter\n      return state\n    default:\n      return state\n  }\n}\n"],"file":"status.js"}