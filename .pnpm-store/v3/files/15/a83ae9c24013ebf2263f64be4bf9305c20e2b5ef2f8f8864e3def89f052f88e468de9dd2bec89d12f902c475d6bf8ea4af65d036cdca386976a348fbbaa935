{"version":3,"sources":["../../src/models/image-nodes.js"],"names":["imageNodes","state","nodeMetaByUrl","reducers","setState","payload","pushNodeMeta","id","sourceUrl","modifiedGmt","nodeUrl"],"mappings":";;;;;AAAA;;AAEA,MAAMA,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,aAAa,EAAE;AADV,GADU;AAKjBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,CAACH,KAAD,EAAQI,OAAR,EAAiB;AACvBJ,MAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAEN,WAAGI;AAFG,OAAR;AAKA,aAAOJ,KAAP;AACD,KARO;;AAURK,IAAAA,YAAY,CAACL,KAAD,EAAQ;AAAEM,MAAAA,EAAF;AAAMC,MAAAA,SAAN;AAAiBC,MAAAA;AAAjB,KAAR,EAAwC;AAClD,YAAMC,OAAO,GAAG,uDAAuBF,SAAvB,CAAhB,CADkD,CAElD;AACA;;AACA,UAAI,CAACP,KAAK,CAACC,aAAN,CAAoBQ,OAApB,CAAL,EAAmC;AACjCT,QAAAA,KAAK,CAACC,aAAN,CAAoBQ,OAApB,IAA+B;AAC7BH,UAAAA,EAD6B;AAE7BE,UAAAA;AAF6B,SAA/B;AAID;;AAED,aAAOR,KAAP;AACD;;AAtBO;AALO,CAAnB;eA+BeD,U","sourcesContent":["import { stripImageSizesFromUrl } from \"~/steps/source-nodes/fetch-nodes/fetch-referenced-media-items\"\n\nconst imageNodes = {\n  state: {\n    nodeMetaByUrl: {},\n  },\n\n  reducers: {\n    setState(state, payload) {\n      state = {\n        ...state,\n        ...payload,\n      }\n\n      return state\n    },\n\n    pushNodeMeta(state, { id, sourceUrl, modifiedGmt }) {\n      const nodeUrl = stripImageSizesFromUrl(sourceUrl)\n      // don't overwrite the lookup table in case we have multiple\n      // sized urls for the same image\n      if (!state.nodeMetaByUrl[nodeUrl]) {\n        state.nodeMetaByUrl[nodeUrl] = {\n          id,\n          modifiedGmt,\n        }\n      }\n\n      return state\n    },\n  },\n}\n\nexport default imageNodes\n"],"file":"image-nodes.js"}