{"version":3,"sources":["../../../../src/bootstrap/load-plugins/utils/handle-gatsby-cloud.ts"],"names":["GATSBY_CLOUD_PLUGIN_NAME","addGatsbyPluginCloudPluginWhenInstalled","plugins","rootDir","cloudPluginLocation","processedGatsbyCloudPlugin","resolve","options","push","incompatibleGatsbyCloudPlugin","plugin","find","name","semver","satisfies","version","includePrerelease"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;AAEO,MAAMA,wBAAwB,GAAI,4BAAlC;;;AAEA,SAASC,uCAAT,CACLC,OADK,EAELC,OAFK,EAGC;AACN,QAAMC,mBAAmB,GAAG,yBAC1BD,OAD0B,EAE1BH,wBAF0B,CAA5B;;AAKA,MAAII,mBAAJ,EAAyB;AACvB,UAAMC,0BAA0B,GAAG,kCACjC;AACEC,MAAAA,OAAO,EAAEF,mBADX;AAEEG,MAAAA,OAAO,EAAE;AAFX,KADiC,EAKjCJ,OALiC,CAAnC;AAOAD,IAAAA,OAAO,CAACM,IAAR,CAAaH,0BAAb;AACD;AACF;;AAEM,SAASI,6BAAT,CACLP,OADK,EAEI;AACT,QAAMQ,MAAM,GAAGR,OAAO,CAACS,IAAR,CACbD,MAAM,IAAIA,MAAM,CAACE,IAAP,KAAgBZ,wBADb,CAAf;AAIA,SAAO,CAACa,MAAM,CAACC,SAAP,CAAiBJ,MAAM,CAAEK,OAAzB,EAAmC,eAAnC,EAAmD;AACzDC,IAAAA,iBAAiB,EAAE;AADsC,GAAnD,CAAR;AAGD","sourcesContent":["import { silent as resolveFromSilent } from \"resolve-from\"\nimport * as semver from \"semver\"\nimport { IPluginInfo } from \"../types\"\nimport { processPlugin } from \"../process-plugin\"\n\nexport const GATSBY_CLOUD_PLUGIN_NAME = `gatsby-plugin-gatsby-cloud`\n\nexport function addGatsbyPluginCloudPluginWhenInstalled(\n  plugins: Array<IPluginInfo>,\n  rootDir: string\n): void {\n  const cloudPluginLocation = resolveFromSilent(\n    rootDir,\n    GATSBY_CLOUD_PLUGIN_NAME\n  )\n\n  if (cloudPluginLocation) {\n    const processedGatsbyCloudPlugin = processPlugin(\n      {\n        resolve: cloudPluginLocation,\n        options: {},\n      },\n      rootDir\n    )\n    plugins.push(processedGatsbyCloudPlugin)\n  }\n}\n\nexport function incompatibleGatsbyCloudPlugin(\n  plugins: Array<IPluginInfo>\n): boolean {\n  const plugin = plugins.find(\n    plugin => plugin.name === GATSBY_CLOUD_PLUGIN_NAME\n  )\n\n  return !semver.satisfies(plugin!.version, `>=4.0.0-alpha`, {\n    includePrerelease: true,\n  })\n}\n"],"file":"handle-gatsby-cloud.js"}