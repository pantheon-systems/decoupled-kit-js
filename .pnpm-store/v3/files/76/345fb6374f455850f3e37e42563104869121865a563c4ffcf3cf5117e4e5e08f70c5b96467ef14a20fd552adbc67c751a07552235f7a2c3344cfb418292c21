{"version":3,"sources":["../../../src/utils/eslint-rules/no-anonymous-exports-page-templates.ts"],"names":["defs","ArrowFunctionExpression","messageId","FunctionDeclaration","forbid","node","declaration","id","ClassDeclaration","noAnonymousExports","meta","type","messages","anonymousArrowFunction","anonymousFunctionDeclaration","anonymousClass","create","context","store","ExportDefaultDeclaration","def","report","module","exports"],"mappings":";;AAEA;;AACA;;AAEA,MAAMA,IAAI,GAAG;AACXC,EAAAA,uBAAuB,EAAE;AACvBC,IAAAA,SAAS,EAAG;AADW,GADd;AAIXC,EAAAA,mBAAmB,EAAE;AACnBD,IAAAA,SAAS,EAAG,8BADO;AAEnBE,IAAAA,MAAM,EAAGC,IAAD,IAAmB,CAACA,IAAI,CAACC,WAAL,CAAiBC;AAF1B,GAJV;AAQXC,EAAAA,gBAAgB,EAAE;AAChBN,IAAAA,SAAS,EAAG,gBADI;AAEhBE,IAAAA,MAAM,EAAGC,IAAD,IAAmB,CAACA,IAAI,CAACC,WAAL,CAAiBC;AAF7B;AARP,CAAb;AAcA,MAAME,kBAAmC,GAAG;AAC1CC,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAG,SADH;AAEJC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,sBAAsB,EAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXc;AAYRC,MAAAA,4BAA4B,EAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBc;AAsBRC,MAAAA,cAAc,EAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/Bc;AAFN,GADoC;AAqC1CC,EAAAA,MAAM,EAAEC,OAAO,IAAI;AACjB,QAAI,CAAC,wCAAeC,YAAf,EAAsBD,OAAtB,CAAL,EAAqC;AACnC,aAAO,EAAP;AACD;;AAED,WAAO;AACLE,MAAAA,wBAAwB,EAAGd,IAAD,IAAsB;AAC9C;AACA,cAAMM,IAAI,GAAGN,IAAI,CAACC,WAAL,CAAiBK,IAA9B;AACA,cAAMS,GAAG,GAAGpB,IAAI,CAACW,IAAD,CAAhB;;AAEA,YAAIS,GAAG,KAAK,CAACA,GAAG,CAAChB,MAAL,IAAegB,GAAG,CAAChB,MAAJ,CAAWC,IAAX,CAApB,CAAP,EAA8C;AAC5CY,UAAAA,OAAO,CAACI,MAAR,CAAe;AACbhB,YAAAA,IADa;AAEbH,YAAAA,SAAS,EAAEkB,GAAG,CAAClB;AAFF,WAAf;AAID;AACF;AAZI,KAAP;AAcD;AAxDyC,CAA5C;AA2DAoB,MAAM,CAACC,OAAP,GAAiBd,kBAAjB","sourcesContent":["import { Rule } from \"eslint\"\nimport { Node, ExportDefaultDeclaration } from \"estree\"\nimport { store } from \"../../redux\"\nimport { isPageTemplate } from \"../eslint-rules-helpers\"\n\nconst defs = {\n  ArrowFunctionExpression: {\n    messageId: `anonymousArrowFunction`,\n  },\n  FunctionDeclaration: {\n    messageId: `anonymousFunctionDeclaration`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n  ClassDeclaration: {\n    messageId: `anonymousClass`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n}\n\nconst noAnonymousExports: Rule.RuleModule = {\n  meta: {\n    type: `problem`,\n    messages: {\n      anonymousArrowFunction: `Anonymous arrow functions cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default () => {}\n\n       After:\n       const Named = () => {}\n       export default Named;\n`,\n      anonymousFunctionDeclaration: `Anonymous function declarations cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default function () {}\n\n       After:\n       export default function Named() {}\n`,\n      anonymousClass: `Anonymous classes cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your class, for example:\n\n       Before:\n       export default class extends Component {}\n\n       After:\n       export default class Named extends Component {}\n`,\n    },\n  },\n  create: context => {\n    if (!isPageTemplate(store, context)) {\n      return {}\n    }\n\n    return {\n      ExportDefaultDeclaration: (node: Node): void => {\n        // @ts-ignore\n        const type = node.declaration.type as ExportDefaultDeclaration[\"type\"]\n        const def = defs[type]\n\n        if (def && (!def.forbid || def.forbid(node))) {\n          context.report({\n            node,\n            messageId: def.messageId,\n          })\n        }\n      },\n    }\n  },\n}\n\nmodule.exports = noAnonymousExports\n"],"file":"no-anonymous-exports-page-templates.js"}