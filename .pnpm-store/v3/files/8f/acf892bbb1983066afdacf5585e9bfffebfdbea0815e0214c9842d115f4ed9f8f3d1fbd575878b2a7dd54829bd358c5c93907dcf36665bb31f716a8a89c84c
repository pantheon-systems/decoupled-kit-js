{"version":3,"sources":["../../src/schema/context.ts"],"names":["withResolverContext","schema","schemaComposer","context","customContext","nodeModel","stats","tracer","telemetryResolverTimings","LocalNodeModel","createPageDependency","defaultFieldResolver","withContext","path","undefined","module","exports"],"mappings":";;;;;AAGA;;AACA;;AACA;;AAQe,SAASA,mBAAT,CAA6C;AAC1DC,EAAAA,MAD0D;AAE1DC,EAAAA,cAF0D;AAG1DC,EAAAA,OAH0D;AAI1DC,EAAAA,aAJ0D;AAK1DC,EAAAA,SAL0D;AAM1DC,EAAAA,KAN0D;AAO1DC,EAAAA,MAP0D;AAQ1DC,EAAAA;AAR0D,CAA7C,EAkB4B;AACzC,MAAI,CAACH,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAG,IAAII,yBAAJ,CAAmB;AAC7BR,MAAAA,MAD6B;AAE7BC,MAAAA,cAF6B;AAG7BQ,MAAAA,oBAAoB,EAApBA;AAH6B,KAAnB,CAAZ;AAKD;;AAED,SAAO,EACL,IAAIP,OAAO,IAAI,EAAf,CADK;AAEL,QAAIC,aAAa,IAAI,EAArB,CAFK;AAGLO,IAAAA,oBAAoB,EAApBA,+BAHK;AAILN,IAAAA,SAAS,EAAEA,SAAS,CAACO,WAAV,CAAsB;AAC/BC,MAAAA,IAAI,EAAEV,OAAO,GAAGA,OAAO,CAACU,IAAX,GAAkBC;AADA,KAAtB,CAJN;AAOLR,IAAAA,KAAK,EAAEA,KAAK,IAAI,IAPX;AAQLC,IAAAA,MAAM,EAAEA,MAAM,IAAI,IARb;AASLC,IAAAA;AATK,GAAP;AAWD;;AAEDO,MAAM,CAACC,OAAP,GAAiBhB,mBAAjB","sourcesContent":["import { GraphQLSchema } from \"graphql\"\nimport { SchemaComposer } from \"graphql-compose\"\n\nimport { createPageDependency } from \"../redux/actions/add-page-dependency\"\nimport { LocalNodeModel } from \"./node-model\"\nimport { defaultFieldResolver } from \"./resolvers\"\nimport { IGraphQLRunnerStats } from \"../query/types\"\nimport {\n  IGatsbyResolverContext,\n  IGraphQLSpanTracer,\n  IGraphQLTelemetryRecord,\n} from \"./type-definitions\"\n\nexport default function withResolverContext<TSource, TArgs>({\n  schema,\n  schemaComposer,\n  context,\n  customContext,\n  nodeModel,\n  stats,\n  tracer,\n  telemetryResolverTimings,\n}: {\n  schema: GraphQLSchema\n  schemaComposer: SchemaComposer<IGatsbyResolverContext<TSource, TArgs>> | null\n  context?: Record<string, any>\n  customContext?: Record<string, any>\n  nodeModel?: any\n  stats?: IGraphQLRunnerStats | null\n  tracer?: IGraphQLSpanTracer\n  telemetryResolverTimings?: Array<IGraphQLTelemetryRecord>\n}): IGatsbyResolverContext<TSource, TArgs> {\n  if (!nodeModel) {\n    nodeModel = new LocalNodeModel({\n      schema,\n      schemaComposer,\n      createPageDependency,\n    })\n  }\n\n  return {\n    ...(context || {}),\n    ...(customContext || {}),\n    defaultFieldResolver,\n    nodeModel: nodeModel.withContext({\n      path: context ? context.path : undefined,\n    }),\n    stats: stats || null,\n    tracer: tracer || null,\n    telemetryResolverTimings,\n  }\n}\n\nmodule.exports = withResolverContext\n"],"file":"context.js"}