{"version":3,"sources":["../../src/utils/clear-require-cache.ts"],"names":["clearRequireCacheRecursively","module","ignoreNodeModules","resolvedModule","require","resolve","cacheEntry","cache","includes","parent","index","children","findIndex","c","filename","splice","forEach"],"mappings":";;;;;AAAO,SAASA,4BAAT,CACLC,MADK,EAELC,iBAA0B,GAAG,IAFxB,EAGC;AACN,QAAMC,cAAc,GAAGC,OAAO,CAACC,OAAR,CAAgBJ,MAAhB,CAAvB;;AACA,QAAMK,UAAU,GAAGF,OAAO,CAACG,KAAR,CAAcJ,cAAd,CAAnB;;AACA,MAAI,CAACG,UAAL,EAAiB;AACf;AACD;;AACD,MAAIJ,iBAAiB,IAAIC,cAAc,CAACK,QAAf,CAAyB,cAAzB,CAAzB,EAAkE;AAChE;AACD;;AACD,SAAOJ,OAAO,CAACG,KAAR,CAAcJ,cAAd,CAAP;AAEA,QAAMM,MAAM,GAAGH,UAAU,CAACG,MAA1B;;AACA,MAAIA,MAAJ,EAAY;AACV,UAAMC,KAAK,GAAGD,MAAM,CAACE,QAAP,CAAgBC,SAAhB,CAA0BC,CAAC,IAAIA,CAAC,CAACC,QAAF,KAAeX,cAA9C,CAAd;;AACA,QAAIO,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBD,MAAAA,MAAM,CAACE,QAAP,CAAgBI,MAAhB,CAAuBL,KAAvB,EAA8B,CAA9B;AACD;AACF;;AACDJ,EAAAA,UAAU,CAACK,QAAX,CAAoBK,OAApB,CAA4Bf,MAAM,IAChCD,4BAA4B,CAACC,MAAM,CAACa,QAAR,EAAkBZ,iBAAlB,CAD9B;AAGD","sourcesContent":["export function clearRequireCacheRecursively(\n  module: string,\n  ignoreNodeModules: boolean = true\n): void {\n  const resolvedModule = require.resolve(module)\n  const cacheEntry = require.cache[resolvedModule]\n  if (!cacheEntry) {\n    return\n  }\n  if (ignoreNodeModules && resolvedModule.includes(`node_modules`)) {\n    return\n  }\n  delete require.cache[resolvedModule]\n\n  const parent = cacheEntry.parent\n  if (parent) {\n    const index = parent.children.findIndex(c => c.filename === resolvedModule)\n    if (index !== -1) {\n      parent.children.splice(index, 1)\n    }\n  }\n  cacheEntry.children.forEach(module =>\n    clearRequireCacheRecursively(module.filename, ignoreNodeModules)\n  )\n}\n"],"file":"clear-require-cache.js"}