{"version":3,"sources":["../../src/redux/save-state.js"],"names":["_","require","report","captureEvent","redux","saveInProgress","saveState","startTime","Date","now","err","warn","message","duration","name","Math","round","console","error","module","exports"],"mappings":";;AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAE,QAAF,CAAjB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAE,yBAAF,CAAtB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAmBF,OAAO,CAAE,kBAAF,CAAhC;;AACA,MAAMG,KAAK,GAAGH,OAAO,CAAE,IAAF,CAArB;;AAEA,IAAII,cAAc,GAAG,KAArB;;AACA,eAAeC,SAAf,GAA2B;AACzB,MAAID,cAAJ,EAAoB;AACpBA,EAAAA,cAAc,GAAG,IAAjB;AAEA,QAAME,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAlB;;AAEA,MAAI;AACF,UAAML,KAAK,CAACE,SAAN,EAAN;AACD,GAFD,CAEE,OAAOI,GAAP,EAAY;AACZR,IAAAA,MAAM,CAACS,IAAP,CAAa,2BAA2BD,GAAG,IAAIA,GAAG,CAACE,OAAZ,IAAwBF,GAAI,EAAnE;AACD;;AAED,MAAI;AACF,UAAMG,QAAQ,GAAG,CAACL,IAAI,CAACC,GAAL,KAAaF,SAAd,IAA2B,IAA5C;AACAJ,IAAAA,YAAY,CAAE,qCAAF,EAAwC;AAClDW,MAAAA,IAAI,EAAG,qBAD2C;AAElDD,MAAAA,QAAQ,EAAEE,IAAI,CAACC,KAAL,CAAWH,QAAX;AAFwC,KAAxC,CAAZ;AAID,GAND,CAME,OAAOH,GAAP,EAAY;AACZO,IAAAA,OAAO,CAACC,KAAR,CAAcR,GAAd;AACD;;AAEDL,EAAAA,cAAc,GAAG,KAAjB;AACD;;AAEDc,MAAM,CAACC,OAAP,GAAiB;AACfd,EAAAA;AADe,CAAjB","sourcesContent":["const _ = require(`lodash`)\nconst report = require(`gatsby-cli/lib/reporter`)\nconst { captureEvent } = require(`gatsby-telemetry`)\nconst redux = require(`./`)\n\nlet saveInProgress = false\nasync function saveState() {\n  if (saveInProgress) return\n  saveInProgress = true\n\n  const startTime = Date.now()\n\n  try {\n    await redux.saveState()\n  } catch (err) {\n    report.warn(`Error persisting state: ${(err && err.message) || err}`)\n  }\n\n  try {\n    const duration = (Date.now() - startTime) / 1000\n    captureEvent(`INTERNAL_STATE_PERSISTENCE_DURATION`, {\n      name: `Save Internal State`,\n      duration: Math.round(duration),\n    })\n  } catch (err) {\n    console.error(err)\n  }\n\n  saveInProgress = false\n}\n\nmodule.exports = {\n  saveState,\n}\n"],"file":"save-state.js"}