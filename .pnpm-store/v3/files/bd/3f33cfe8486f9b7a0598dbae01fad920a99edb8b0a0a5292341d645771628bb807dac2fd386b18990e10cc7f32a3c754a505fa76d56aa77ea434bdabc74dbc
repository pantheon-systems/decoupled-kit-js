{"version":3,"sources":["../../../src/utils/validate-engines/index.ts"],"names":["validateEngines","directory","worker","WorkerPool","require","resolve","numWorkers","env","GATSBY_OPEN_TRACING_CONFIG_FILE","silent","single","validate","end"],"mappings":";;;;;AAAA;;AAEO,eAAeA,eAAf,CAA+BC,SAA/B,EAAiE;AACtE,QAAMC,MAAM,GAAG,IAAIC,wBAAJ,CACbC,OAAO,CAACC,OAAR,CAAiB,SAAjB,CADa,EAEb;AACEC,IAAAA,UAAU,EAAE,CADd;AAEEC,IAAAA,GAAG,EAAE;AACH;AACA;AACA;AACAC,MAAAA,+BAA+B,EAAG;AAJ/B,KAFP;AAQEC,IAAAA,MAAM,EAAE;AARV,GAFa,CAAf;;AAcA,MAAI;AACF,UAAMP,MAAM,CAACQ,MAAP,CAAcC,QAAd,CAAuBV,SAAvB,CAAN;AACD,GAFD,SAEU;AACRC,IAAAA,MAAM,CAACU,GAAP;AACD;AACF","sourcesContent":["import { WorkerPool } from \"gatsby-worker\"\n\nexport async function validateEngines(directory: string): Promise<void> {\n  const worker = new WorkerPool<typeof import(\"./child\")>(\n    require.resolve(`./child`),\n    {\n      numWorkers: 1,\n      env: {\n        // Do not \"inherit\" this env var for validation,\n        // as otherwise validation will fail on any imports\n        // that OpenTracing config might make\n        GATSBY_OPEN_TRACING_CONFIG_FILE: ``,\n      },\n      silent: true,\n    }\n  )\n\n  try {\n    await worker.single.validate(directory)\n  } finally {\n    worker.end()\n  }\n}\n"],"file":"index.js"}